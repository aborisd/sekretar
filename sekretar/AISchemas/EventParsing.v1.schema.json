{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://sekretar.app/schemas/event-parsing/v1",
  "title": "Event Parsing Response",
  "description": "Schema for LLM event parsing responses",
  "type": "object",
  "required": ["title", "start_iso"],
  "properties": {
    "title": {
      "type": "string",
      "minLength": 1,
      "maxLength": 200,
      "description": "Event title"
    },
    "start_iso": {
      "type": "string",
      "format": "date-time",
      "description": "Event start time in ISO 8601 format"
    },
    "end_iso": {
      "type": "string",
      "format": "date-time",
      "description": "Event end time in ISO 8601 format (if not all-day)"
    },
    "all_day": {
      "type": "boolean",
      "default": false,
      "description": "Whether this is an all-day event"
    },
    "location": {
      "type": "string",
      "maxLength": 200,
      "description": "Event location if mentioned"
    },
    "attendees": {
      "type": "array",
      "items": {
        "type": "string",
        "format": "email"
      },
      "description": "List of attendee emails if mentioned"
    },
    "description": {
      "type": "string",
      "maxLength": 1000,
      "description": "Event description or notes"
    },
    "reminder_minutes": {
      "type": "array",
      "items": {
        "type": "integer",
        "minimum": 0,
        "maximum": 10080
      },
      "maxItems": 5,
      "description": "Reminder times in minutes before event"
    },
    "recurrence": {
      "type": "object",
      "properties": {
        "frequency": {
          "type": "string",
          "enum": ["daily", "weekly", "monthly", "yearly"],
          "description": "Recurrence frequency"
        },
        "interval": {
          "type": "integer",
          "minimum": 1,
          "maximum": 365,
          "description": "Interval between occurrences"
        },
        "count": {
          "type": "integer",
          "minimum": 1,
          "maximum": 999,
          "description": "Number of occurrences"
        },
        "until_date": {
          "type": "string",
          "format": "date",
          "description": "End date for recurrence"
        },
        "weekdays": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["monday", "tuesday", "wednesday", "thursday", "friday", "saturday", "sunday"]
          },
          "description": "Specific weekdays for weekly recurrence"
        }
      }
    },
    "calendar_id": {
      "type": "string",
      "description": "Target calendar ID if specified"
    },
    "confidence": {
      "type": "number",
      "minimum": 0,
      "maximum": 1,
      "description": "Confidence score of the parsing"
    },
    "ambiguities": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "field": {
            "type": "string",
            "description": "Field with ambiguity"
          },
          "options": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Possible interpretations"
          },
          "reason": {
            "type": "string",
            "description": "Why this is ambiguous"
          }
        }
      },
      "description": "Ambiguous parts that need clarification"
    }
  },
  "additionalProperties": false
}